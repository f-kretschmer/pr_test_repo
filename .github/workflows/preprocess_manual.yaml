name: Preprocessing of specified datasets

on:
  workflow_dispatch:
    inputs:
      datasets:
        description: 'Datasets to preprocess, separated by space. Example: 0001 0002 0044'
        required: True
        type: string
      do_standardize:
        description: 'Whether to standardize compounds'
        type: boolean
        default: true
      do_classyfire:
        description: 'Whether to compute ClassyFire classes'
        type: boolean
        default: true

jobs:
  preprocess:
    name: Preprocess raw data
    # NOTE: on windows as computing of descriptors has a bug on linux right now
    runs-on: ubuntu-latest
    container: fkre/repo_rt_preprocessing:latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
         lfs: true

    - run: |
        pwd
        ls -ltrh
        ls -ltrh /github/workspace/

    - name: Debug with tmate on failure
      if: ${{ failure() }}
      uses: mxschmitt/action-tmate@v3
